module imem(addr, instr);
    parameter SIZE=4096;
    parameter OFFSET=0;
    parameter IMEMFILE = "instr.hex";

    input [31:0] addr;
    output [31:0] instr;
    reg [7:0] mem[(SIZE-1):0];
    reg [0:8*80-1] filename;

    wire [31:0] phys_addr;

    assign phys_addr = addr - OFFSET;
    assign instr = {mem[phys_addr],mem[phys_addr+1],mem[phys_addr+2],mem[phys_addr+3]};

    //USED TO LOAD INSTRUCTION FILE
    initial begin
    
        // Load IMEM from file
        if (!$value$plusargs("instrfile=%s", filename)) begin
            filename = IMEMFILE;
        end
        $readmemh(filename, IMEM.mem);
        
      end

endmodule // imem